<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>AI Sharingan</title>

<style>
body{
  margin:0;
  background:black;
  color:#0f0;
  font-family:monospace;
  text-align:center;
  overflow:hidden;
}

/* ===== BOOT ===== */
#boot{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99;
}

.eye{
  width:120px;
  height:120px;
  border-radius:50%;
  background:#b00000;
  margin:30px;
  position:relative;
}

.eye::after{
  content:"";
  position:absolute;
  inset:38%;
  background:black;
  border-radius:50%;
}

.tomoe{
  position:absolute;
  width:14px;
  height:14px;
  background:black;
  border-radius:50%;
}
.t1{top:10px;left:50px;}
.t2{bottom:20px;left:18px;}
.t3{bottom:20px;right:18px;}

/* c·∫£m x√∫c */
.calm{animation:calm 1.5s;}
.angry{animation:shake .15s infinite;box-shadow:0 0 35px red;}
.awake{animation:spin 1s linear infinite;}

@keyframes calm{
  from{opacity:0;transform:scale(.4);}
  to{opacity:1;transform:scale(1);}
}
@keyframes shake{
  0%{transform:translateX(-2px);}
  50%{transform:translateX(2px);}
  100%{transform:translateX(-2px);}
}
@keyframes spin{
  from{transform:rotate(0);}
  to{transform:rotate(360deg);}
}

/* ===== AI UI ===== */
#aiUI{display:none;padding-top:15px;}
video,canvas{width:320px;border:2px solid #0f0;}
</style>
</head>
<body>

<!-- BOOT -->
<div id="boot">
  <div class="eye calm" id="e1">
    <div class="tomoe t1"></div>
    <div class="tomoe t2"></div>
    <div class="tomoe t3"></div>
  </div>
  <div class="eye calm" id="e2">
    <div class="tomoe t1"></div>
    <div class="tomoe t2"></div>
    <div class="tomoe t3"></div>
  </div>
</div>

<!-- AI -->
<div id="aiUI">
  <h3>ü§ñ AI Nh·∫≠n C·ª≠ Ch·ªâ Tay & Gi·ªçng N√≥i</h3>
  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>
  <p id="handStatus">‚úã Ch∆∞a ph√°t hi·ªán tay</p>
  <p id="voiceStatus">üéôÔ∏è Ch∆∞a c√≥ l·ªánh</p>
  <button onclick="startVoice()">üé§ N√≥i</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<script>
const e1=e2=document.getElementById("e1");
const e2b=document.getElementById("e2");
const boot=document.getElementById("boot");
const aiUI=document.getElementById("aiUI");

/* 3 c·∫£m x√∫c */
setTimeout(()=>{e1.className="eye angry";e2b.className="eye angry";},1500);
setTimeout(()=>{e1.className="eye awake";e2b.className="eye awake";},3000);
setTimeout(()=>{
  boot.style.display="none";
  aiUI.style.display="block";
  startCamera();
},5000);

/* ===== AI GI·ªÆ NGUY√äN ===== */
const video=document.getElementById("video");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=320;canvas.height=240;

function startCamera(){
  navigator.mediaDevices.getUserMedia({video:true})
  .then(s=>video.srcObject=s);

  const hands=new Hands({
    locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
  });
  hands.setOptions({maxNumHands:1,minDetectionConfidence:.7});
  hands.onResults(r=>{
    ctx.clearRect(0,0,canvas.width,canvas.height);
    if(r.multiHandLandmarks){
      document.getElementById("handStatus").innerText="‚úã ƒê√£ th·∫•y tay";
      r.multiHandLandmarks[0].forEach(p=>{
        ctx.beginPath();
        ctx.arc(p.x*canvas.width,p.y*canvas.height,4,0,Math.PI*2);
        ctx.fillStyle="lime";ctx.fill();
      });
    }
  });

  new Camera(video,{
    onFrame:async()=>await hands.send({image:video}),
    width:320,height:240
  }).start();
}

function startVoice(){
  const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
  const r=new SR();r.lang="vi-VN";
  r.onresult=e=>{
    const t=e.results[0][0].transcript;
    document.getElementById("voiceStatus").innerText="üó£Ô∏è "+t;
    if(t.includes("ch√†o")) alert("ü§ñ AI: Xin ch√†o");
  };
  r.start();
}
</script>
</body>
</html>
